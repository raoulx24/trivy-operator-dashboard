<h3>Exposed Secret Reports</h3>

<app-generic-master-detail
  [activeNamespaces]="activeNamespaces"
  [dataDtos]="dataDtos"
  [detailsTableColumns]="detailsTableColumns"
  [detailsTableOptions]="detailsTableOptions"
  [isMainTableLoading]="isMainTableLoading"
  [mainTableColumns]="mainTableColumns"
  [mainTableExpandCellOptions]="mainTableExpandCellOptions"
  [mainTableExpandTableOptions]="mainTableExpandTableOptions"
  [mainTableOptions]="mainTableOptions"
  (mainTableExpandCallback)="onMainTableExpandCallback($event)"
  (refreshRequested)="onRefreshRequested($event)"
/>

<p-dialog
  *ngIf="mainTableExpandCallbackDto && mainTableExpandCallbackDto.resources"
  closable="true"
  closeOnEscape="true"
  dismissableMask="true"
  resizable="true"
  [breakpoints]="{ '890px': '90vw' }"
  [contentStyle]="{ height: '60vh' }"
  [header]="getPanelHeaderText()"
  [modal]="true"
  [style]="{ width: '50rem' }"
  [(visible)]="isImageUsageDialogVisible"
>
  <p-table
    scrollHeight="flex"
    sortMode="multiple"
    styleClass="p-datatable-sm text-sm p-0"
    [scrollable]="true"
    [value]="mainTableExpandCallbackDto!.resources!"
  >
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="name" style="width: 55%">
          Resource Name
          <p-sortIcon field="name" />
        </th>
        <th pSortableColumn="kind" style="width: 20%">
          Kind
          <p-sortIcon field="kind" />
        </th>
        <th pSortableColumn="containerName" style="width: 25%">
          Container
          <p-sortIcon field="containerName" />
        </th>
      </tr>
    </ng-template>
    <ng-template let-resource pTemplate="body">
      <tr>
        <td style="width: 55%">
          {{ resource.name }}
        </td>
        <td style="width: 20%">
          {{ resource.kind }}
        </td>
        <td style="width: 25%">
          {{ resource.containerName }}
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-dialog>
