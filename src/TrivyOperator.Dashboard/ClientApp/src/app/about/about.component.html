<div class="pb-3">
  <p-panel header="Trivy Operator Dashboard" class="mb-3" [toggleable]="true">
    <div class="grid">
      <div style="width: 300px" class="col-fixed">
        <img src="assets/logo.blurred.png" style="width: 100%" />
      </div>
      <div class="col-12 md:col grid">
        <div class="col-12 lg:col-6 xl:col-8">
          <h4>Intro</h4>
          <p>
            Welcome to the Trivy Operator Dashboard, a comprehensive security management tool for Kubernetes environments.
            Built on top of the powerful Trivy Operator from Aqua Security, this dashboard provides insights into your
            cluster's security posture. It offers detailed insights on vulnerability scans, policy validation scans and
            other ones. With an intuitive and user-friendly interface, you can easily monitor, detect, and respond to
            security threats, ensuring your Kubernetes environment remains robust and secure.
          </p>
        </div>
        <div class="col-12 lg:col-6 xl:col-4">
          <h4>Features</h4>
          <ul>
            <li>Vulnerability Reports</li>
            <li>Config Audit Reports</li>
            <li>Cluster RBAC Assessment Reports</li>
            <li>Exposed Secret Reports</li>
            <li>Cluster Compliance Reports</li>
            <li>Cluster Vulnerability Reports</li>
            <li>RBAC Assessment Reports</li>
            <li>SBOM Reports</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="grid">
      <div class="col">
        <p>
          All of them consists in dashboards (for view on a glance), browse and inspect findings (with table filters,
          sorts), export data.
        </p>
        <p>This app is fully operational, with new features currently in development. Stay tuned for more updates!</p>
        <p>More info on <a href="https://github.com/raoulx24/work.trivy">GitHub page</a>.</p>
      </div>
    </div>
    <h3>Version Info</h3>

    <span>Current Version:</span>
    <p-tag class="p-2" [rounded]="true" [value]="currentVersion ? (currentVersion.fileVersion ?? 'n/a') : 'n/a'" />
    <span>Latest Version:</span>
    <p-tag class="p-2" [rounded]="true" [value]=" releaseNotes ? (releaseNotes[0].tag_name ?? 'n/a') : 'n/a'" />
    <p-tag *ngIf="newVersionAvailable" class="p-4" [rounded]="true" value="New version available!" icon="pi pi-info-circle" severity="danger"/>
    <div *ngIf="releaseNotes">
      <h2>Release Notes</h2>
      <div class="grid align-items-start md:align-items-stretch">
        <div *ngFor="let releaseNote of releaseNotes; let i = index"
             class="col-12 md:col-6 lg:col-4 xl:col-3">
          <p-card class="h-full"
                  [ngClass]="{'p-card-bold-subtitle': i === 0}"
                  [header]="releaseNote.name ?? ''"
                  subheader="{{ releaseNote.created_at ?? '' | date: 'yyyy-MM-dd' }} {{ i === 0 ? '(latest)' : '' }}">
            <markdown [data]="releaseNote.body ?? ''"></markdown>
          </p-card>
        </div>
      </div>
    </div>
  </p-panel>
</div>

<p-panel header="Trivy Operator" [toggleable]="true">
  <div class="grid">
    <div style="width: 300px" class="col-fixed">
      <img src="assets/trivy-operator-logo.png" style="width: 100%; filter: invert(1)" />
    </div>
    <div class="col">
      <h5>Intro</h5>
      <p>
        The Trivy Operator leverages <a href="https://github.com/aquasecurity/trivy">Trivy</a> to continuously scan your
        Kubernetes cluster for security issues. The scans are summarised in security reports as Kubernetes
        <a href="https://aquasecurity.github.io/trivy-operator/latest/docs/crds/">Custom Resource Definitions</a>, which
        become accessible through the Kubernetes API. The Operator does this by watching Kubernetes for state changes
        and automatically triggering security scans in response. For example, a vulnerability scan is initiated when a
        new Pod is created. This way, users can find and view the risks that relate to different resources in a
        <code>Kubernetes-native</code>
        way.
      </p>
    </div>
  </div>
  <div class="grid">
    <div class="col">
      <h5>In-cluster Security Scans</h5>
      <p>
        The Trivy Operator automatically generates and updates security reports. These reports are generated in response
        to new workload and other changes on a Kubernetes cluster, generating the following reports:
      </p>
      <ul>
        <li>Vulnerability Scans: Automated vulnerability scanning for Kubernetes workloads.</li>
        <li>
          ConfigAudit Scans: Automated configuration audits for Kubernetes resources with predefined rules or custom
          Open Policy Agent (OPA) policies.
        </li>
        <li>
          Exposed Secret Scans: Automated secret scans which find and detail the location of exposed Secrets within your
          cluster.
        </li>
        <li>
          RBAC scans: Role Based Access Control scans provide detailed information on the access rights of the different
          resources installed.
        </li>
        <li>
          K8s core component infra assessment scan Kubernetes infra core components
          (etcd,apiserver,scheduler,controller-manager and etc) setting and configuration.
        </li>
        <li>
          k8s outdated api validation - a configaudit check will validate if the resource api has been deprecated and
          planned for removal
        </li>
        <li>Compliance reports</li>
        <li>NSA, CISA Kubernetes Hardening Guidance v1.1 cybersecurity technical report is produced.</li>
        <li>CIS Kubernetes Benchmark v1.23 cybersecurity technical report is produced.</li>
        <li>Kubernetes pss-baseline, Pod Security Standards</li>
        <li>Kubernetes pss-restricted, Pod Security Standards</li>
        <li>SBOM (Software Bill of Materials generations) for Kubernetes workloads.</li>
      </ul>
      <h5 id="usage">Usage</h5>
      <p>
        The official <a href="https://aquasecurity.github.io/trivy-operator/latest">Documentation</a> provides detailed
        installation, configuration, troubleshooting, and quick start guides.
      </p>
      <p>
        You can install the Trivy-operator Operator with
        <a href="https://aquasecurity.github.io/trivy-operator/latest/getting-started/installation/kubectl/">
          Static YAML Manifests
        </a>
        and follow the <a href="https://aquasecurity.github.io/trivy-operator/latest/">Getting Started</a> guide to see
        how vulnerability and configuration audit reports are generated automatically.
      </p>
    </div>
  </div>
</p-panel>
