<app-generic-master-detail [activeNamespaces]="activeNamespaces"
                           [dataDtos]="dataDtos"
                           [detailsTableColumns]="detailsTableColumns"
                           [isMainTableLoading]="isMainTableLoading"
                           [mainTableColumns]="mainTableColumns"
                           [singleSelectDataDto]="selectedTrivyReportDto"
                           [splitterStorageKey]="'Config Audit Reports'"
                           (refreshRequested)="onRefreshRequested($event)"
                           (mainTableMultiHeaderActionRequested)="onMainTableMultiHeaderActionRequested($event)"
                           (mainTableSelectedRowChanged)="onMainTableSelectedRowChanged($event)"

                           [mainTableIsRefreshVisible]="!this.queryUid"
                           [mainTableIsRefreshFilterable]="!this.queryUid"
                           [mainTableSelectionMode]="'single'"
                           [mainTableStyle]="{ width: '775px' }"
                           [mainTableStateKey]="'Config Audit Reports - Main'"
                           [mainTableExtraClasses]="'trivy-half'"
                           [mainTableMultiHeaderActions]="[
                             { label: '', icon: 'pi pi-align-justify', specialAction: 'Go to Detailed â§‰' },
                             { label: 'Compare with...', icon: 'pi pi-copy', enabledIfRowSelected: true },
                             { label: '', specialAction: 'Clear Sort/Filters' },
                           ]"

                           [detailsIsResetFiltersVisible]="true"
                           [detailsStateKey]="'Config Audit Reports - Details'"
                           [detailsDataKey]="'id'"
                           [detailsRowExpansionRender]="'messages'"
                           [detailsExtraClasses]="'trivy-half'" />

@if (selectedTrivyReportDto && isTrivyReportsCompareVisible) {
  <p-dialog closable="true"
            closeOnEscape="true"
            dismissableMask="true"
            resizable="true"
            maximizable="true"
            [breakpoints]="{ '890px': '90vw' }"
            [contentStyle]="{ height: '95vh' }"
            header="Compare Config Audit Reports"
            [modal]="true"
            [style]="{ width: '90vw' }"
            [(visible)]="isTrivyReportsCompareVisible" >
    <app-generic-reports-compare [dataDtos]="dataDtos"
                                 [comparedTableColumns]="comparedTableColumns"
                                 [namespacedImageDtos]="compareNamespacedImageDtos"
                                 [firstSelectedTrivyReportId]="compareFirstSelectedIdId"

                                 [compareIsResetFiltersVisible]="true"
                                 [compareStateKey]="'Config Audit Reports - Compared'"
                                 [compareExtraClasses]="'trivy-with-filters'"
                                 imagePlaceholder="Select Config Audit Report..."/>
  </p-dialog>
}
