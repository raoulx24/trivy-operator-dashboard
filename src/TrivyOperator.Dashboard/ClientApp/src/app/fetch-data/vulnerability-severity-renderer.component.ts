import {Component} from '@angular/core';
import {ICellRendererParams} from "ag-grid-community";
import {ICellRendererAngularComp} from "ag-grid-angular";

@Component({
  standalone: true,
  template: `
    <span class="badge {{ badgeClass }}">{{ newValue }}</span>
  `
})
export class VulnerabilitySeverityRenderer implements ICellRendererAngularComp {
  public value: any;

  public backgroundColor!: string;
  public frontColor!: string;
  public newValue!: string;
  public badgeClass!: string;

  agInit(params: ICellRendererParams): void {
    switch (params.value) {
      case "CRITICAL":
        this.backgroundColor = "lightsalmon";
        this.badgeClass = "text-bg-danger"
        this.newValue = "CRIT"
        break;
      case "HIGH":
        this.backgroundColor = "orange";
        this.newValue = "HIGH"
        this.badgeClass = "text-bg-warning"
        break;
      case "MEDIUM":
        this.backgroundColor = "yellow";
        this.newValue = "MED"
        this.badgeClass = "text-bg-secondary"
        break;
      case "LOW":
        this.backgroundColor = "lightyellow";
        this.newValue = "LOW"
        this.badgeClass = "text-bg-info"
        break;
      case "UNKNOWN":
        this.backgroundColor = "aqua";
        this.newValue = "UNK"
        this.badgeClass = "text-bg-primary"
        break;
    }

    this.frontColor = "black";
    this.value = params.value;
  }

  refresh(params: ICellRendererParams) {
    return false;
  }
}
